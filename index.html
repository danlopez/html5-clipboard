<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(function() {

        $('#editable').html(localStorage.getItem("myClipboard")).focus();
        var saveTimer, lastSaveTime = 0;
        var minSaveTime = 1000;

        $('#editable').on('input', function() {
   
                var now = new Date().getTime();
    
                function saveProgress() {
                        $('#worksave').show().html("Work saved").fadeOut();
                        localStorage.setItem("myClipboard", $('#editable').html());
                }

                if (!saveTimer) {
                        if (now - lastSaveTime > (3 * minSaveTime)) {
                        saveProgress();   // fire immediately on first scroll
                        lastSaveTime = now;
                        }
        
                        saveTimer = setTimeout(function() {
                                saveTimer = null;
                                lastSaveTime = new Date().getTime();
                                saveProgress();
                        }, minSaveTime);
                }
        });

    });
</script>
<link rel="stylesheet" href="css/main.css">
</head>

<body>
<header>
<h1>Welcome to notethis</h1>
<p>notethis is a free clipboard.  Just start typing.  It'll be here when you get back</p>
</header>
<div id="editable" contenteditable="true">
</div>
<script src="js/main.js"></script>
</body>
</html>
